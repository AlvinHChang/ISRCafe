{"ast":null,"code":"import _classCallCheck from \"/Users/alvinchang/ISRCafe/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/alvinchang/ISRCafe/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/alvinchang/ISRCafe/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/alvinchang/ISRCafe/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/alvinchang/ISRCafe/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/alvinchang/ISRCafe/src/CafeContainer/CafeContainer.js\";\nimport React from 'react';\nimport config from '../config';\nimport CafeTitle from '../CafeTitle/CafeTitle';\n\nvar CafeContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CafeContainer, _React$Component);\n\n  function CafeContainer(props) {\n    var _this;\n\n    _classCallCheck(this, CafeContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CafeContainer).call(this, props));\n    _this.refreshInterval = 8;\n\n    _this.initClient = function () {\n      // 2. Initialize the JavaScript client library.\n      window.gapi.client.init({\n        apiKey: config.apiKey,\n        // Your API key will be automatically added to the Discovery Document URLs.\n        discoveryDocs: config.discoveryDocs\n      }).then(function () {\n        // 3. Initialize and make the API request.\n        load(_this.onLoad);\n      });\n    };\n\n    _this.onLoad = function (data, error) {\n      if (data) {\n        var orders = data.orders;\n\n        _this.setState({\n          orders: orders\n        });\n      } else {\n        _this.setState({\n          error: error\n        });\n      }\n    };\n\n    _this.tick = function () {\n      // runs every time a tick is called\n      var refreshTime = _this.state.refreshTime - 1;\n\n      if (refreshTime <= 0) {\n        refreshTime = _this.refreshInterval;\n        load(_this.onLoad);\n      }\n\n      _this.setState({\n        refreshTime: refreshTime\n      });\n    };\n\n    _this.state = {\n      orders: [],\n      error: null,\n      refreshTime: _this.refreshInterval\n    };\n    _this.intervalHandle = setInterval(_this.tick, 1000);\n    return _this;\n  }\n\n  _createClass(CafeContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // 1. Load the JavaScript client library.\n      window.gapi.load(\"client\", this.initClient);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          error = _this$state.error,\n          orders = _this$state.orders,\n          refreshTime = _this$state.refreshTime;\n\n      if (error) {\n        console.log(error); // so it doesn't continuously read errors\n\n        this.setState({\n          error: null\n        });\n      }\n\n      return React.createElement(CafeTitle, {\n        orders: orders,\n        refreshTime: refreshTime,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return CafeContainer;\n}(React.Component);\n\nexport function load(callback) {\n  window.gapi.client.load(\"sheets\", \"v4\", function () {\n    window.gapi.client.sheets.spreadsheets.values.get({\n      spreadsheetId: config.spreadsheetId,\n      // Modify according to correct sheet information\n      range: config.spreadsheetRange\n    }).then(function (response) {\n      console.log(response);\n      var data = response.result.values || [];\n      var orders = data.map(function (order) {\n        return {\n          time: order[0],\n          name: order[1],\n          drink: order[2],\n          isReady: order[3] === 'TRUE',\n          hasReceived: order[4] === 'TRUE'\n        };\n      }) || [];\n      callback({\n        orders: orders\n      });\n    }, function (response) {\n      callback(false, response.result.error);\n    });\n  });\n}\nexport default CafeContainer;","map":{"version":3,"sources":["/Users/alvinchang/ISRCafe/src/CafeContainer/CafeContainer.js"],"names":["React","config","CafeTitle","CafeContainer","props","refreshInterval","initClient","window","gapi","client","init","apiKey","discoveryDocs","then","load","onLoad","data","error","orders","setState","tick","refreshTime","state","intervalHandle","setInterval","console","log","Component","callback","sheets","spreadsheets","values","get","spreadsheetId","range","spreadsheetRange","response","result","map","order","time","name","drink","isReady","hasReceived"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;;IAEMC,a;;;;;AAEF,yBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,uFAAMA,KAAN;AADc,UADlBC,eACkB,GADA,CACA;;AAAA,UAalBC,UAbkB,GAaL,YAAM;AACf;AACAC,MAAAA,MAAM,CAACC,IAAP,CAAYC,MAAZ,CACKC,IADL,CACU;AACFC,QAAAA,MAAM,EAAEV,MAAM,CAACU,MADb;AAEF;AACAC,QAAAA,aAAa,EAAEX,MAAM,CAACW;AAHpB,OADV,EAMKC,IANL,CAMU,YAAM;AACR;AACAC,QAAAA,IAAI,CAAC,MAAKC,MAAN,CAAJ;AACH,OATL;AAUH,KAzBiB;;AAAA,UA0BlBA,MA1BkB,GA0BT,UAACC,IAAD,EAAOC,KAAP,EAAiB;AACtB,UAAID,IAAJ,EAAU;AACN,YAAME,MAAM,GAAGF,IAAI,CAACE,MAApB;;AACA,cAAKC,QAAL,CAAc;AAAED,UAAAA,MAAM,EAANA;AAAF,SAAd;AACH,OAHD,MAGO;AACH,cAAKC,QAAL,CAAc;AAAEF,UAAAA,KAAK,EAALA;AAAF,SAAd;AACH;AACJ,KAjCiB;;AAAA,UAmClBG,IAnCkB,GAmCX,YAAM;AACT;AACA,UAAIC,WAAW,GAAG,MAAKC,KAAL,CAAWD,WAAX,GAAyB,CAA3C;;AACA,UAAIA,WAAW,IAAI,CAAnB,EAAsB;AAClBA,QAAAA,WAAW,GAAG,MAAKhB,eAAnB;AACAS,QAAAA,IAAI,CAAC,MAAKC,MAAN,CAAJ;AACH;;AACD,YAAKI,QAAL,CAAc;AAACE,QAAAA,WAAW,EAAXA;AAAD,OAAd;AAEH,KA5CiB;;AAEd,UAAKC,KAAL,GAAa;AACTJ,MAAAA,MAAM,EAAE,EADC;AAETD,MAAAA,KAAK,EAAE,IAFE;AAGTI,MAAAA,WAAW,EAAE,MAAKhB;AAHT,KAAb;AAKA,UAAKkB,cAAL,GAAsBC,WAAW,CAAC,MAAKJ,IAAN,EAAY,IAAZ,CAAjC;AAPc;AAQjB;;;;wCACmB;AAChB;AACAb,MAAAA,MAAM,CAACC,IAAP,CAAYM,IAAZ,CAAiB,QAAjB,EAA2B,KAAKR,UAAhC;AACH;;;6BAiCQ;AAAA,wBACgC,KAAKgB,KADrC;AAAA,UACEL,KADF,eACEA,KADF;AAAA,UACSC,MADT,eACSA,MADT;AAAA,UACiBG,WADjB,eACiBA,WADjB;;AAEL,UAAIJ,KAAJ,EAAW;AACPQ,QAAAA,OAAO,CAACC,GAAR,CAAYT,KAAZ,EADO,CAEP;;AACA,aAAKE,QAAL,CAAc;AAACF,UAAAA,KAAK,EAAE;AAAR,SAAd;AACH;;AACD,aACI,oBAAC,SAAD;AAAW,QAAA,MAAM,EAAEC,MAAnB;AAA2B,QAAA,WAAW,EAAEG,WAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAGH;;;;EAzDuBrB,KAAK,CAAC2B,S;;AA6DlC,OAAO,SAASb,IAAT,CAAcc,QAAd,EAAwB;AAC7BrB,EAAAA,MAAM,CAACC,IAAP,CAAYC,MAAZ,CAAmBK,IAAnB,CAAwB,QAAxB,EAAkC,IAAlC,EAAwC,YAAM;AAC5CP,IAAAA,MAAM,CAACC,IAAP,CAAYC,MAAZ,CAAmBoB,MAAnB,CAA0BC,YAA1B,CAAuCC,MAAvC,CACGC,GADH,CACO;AACDC,MAAAA,aAAa,EAAEhC,MAAM,CAACgC,aADrB;AAED;AACAC,MAAAA,KAAK,EAAEjC,MAAM,CAACkC;AAHb,KADP,EAMGtB,IANH,CAOI,UAAAuB,QAAQ,EAAI;AACRX,MAAAA,OAAO,CAACC,GAAR,CAAYU,QAAZ;AACF,UAAMpB,IAAI,GAAGoB,QAAQ,CAACC,MAAT,CAAgBN,MAAhB,IAA0B,EAAvC;AACA,UAAMb,MAAM,GAAGF,IAAI,CAACsB,GAAL,CAAS,UAAAC,KAAK;AAAA,eAAK;AAC9BC,UAAAA,IAAI,EAAED,KAAK,CAAC,CAAD,CADmB;AAE9BE,UAAAA,IAAI,EAAEF,KAAK,CAAC,CAAD,CAFmB;AAG9BG,UAAAA,KAAK,EAAEH,KAAK,CAAC,CAAD,CAHkB;AAI9BI,UAAAA,OAAO,EAAGJ,KAAK,CAAC,CAAD,CAAL,KAAa,MAJO;AAK9BK,UAAAA,WAAW,EAAGL,KAAK,CAAC,CAAD,CAAL,KAAa;AALG,SAAL;AAAA,OAAd,KAOR,EAPP;AAQAX,MAAAA,QAAQ,CAAC;AACPV,QAAAA,MAAM,EAANA;AADO,OAAD,CAAR;AAGD,KArBL,EAsBI,UAAAkB,QAAQ,EAAI;AACVR,MAAAA,QAAQ,CAAC,KAAD,EAAQQ,QAAQ,CAACC,MAAT,CAAgBpB,KAAxB,CAAR;AACD,KAxBL;AA0BD,GA3BD;AA4BD;AAED,eAAed,aAAf","sourcesContent":["import React from 'react';\nimport config from '../config';\nimport CafeTitle from '../CafeTitle/CafeTitle';\n\nclass CafeContainer extends React.Component{\n    refreshInterval = 8;\n    constructor(props){\n        super(props);\n        this.state = {\n            orders: [],\n            error: null,\n            refreshTime: this.refreshInterval\n        };\n        this.intervalHandle = setInterval(this.tick, 1000);\n    }\n    componentDidMount() {\n        // 1. Load the JavaScript client library.\n        window.gapi.load(\"client\", this.initClient);\n    }\n    initClient = () => {\n        // 2. Initialize the JavaScript client library.\n        window.gapi.client\n            .init({\n                apiKey: config.apiKey,\n                // Your API key will be automatically added to the Discovery Document URLs.\n                discoveryDocs: config.discoveryDocs\n            })\n            .then(() => {\n                // 3. Initialize and make the API request.\n                load(this.onLoad);\n            });\n    };\n    onLoad = (data, error) => {\n        if (data) {\n            const orders = data.orders;\n            this.setState({ orders });\n        } else {\n            this.setState({ error });\n        }\n    };\n\n    tick = () => {\n        // runs every time a tick is called\n        let refreshTime = this.state.refreshTime - 1;\n        if (refreshTime <= 0) {\n            refreshTime = this.refreshInterval;\n            load(this.onLoad);\n        }\n        this.setState({refreshTime})\n\n    };\n    render() {\n        const {error, orders, refreshTime} = this.state;\n        if (error) {\n            console.log(error);\n            // so it doesn't continuously read errors\n            this.setState({error: null});\n        }\n        return (\n            <CafeTitle orders={orders} refreshTime={refreshTime} />\n        );\n    }\n}\n\n\nexport function load(callback) {\n  window.gapi.client.load(\"sheets\", \"v4\", () => {\n    window.gapi.client.sheets.spreadsheets.values\n      .get({\n          spreadsheetId: config.spreadsheetId,\n          // Modify according to correct sheet information\n          range: config.spreadsheetRange\n      })\n      .then(\n        response => {\n            console.log(response);\n          const data = response.result.values || [];\n          const orders = data.map(order => ({\n              time: order[0],\n              name: order[1],\n              drink: order[2],\n              isReady: (order[3] === 'TRUE'),\n              hasReceived: (order[4] === 'TRUE'),\n\n          })) || [];\n          callback({\n            orders\n          });\n        },\n        response => {\n          callback(false, response.result.error);\n        }\n      );\n  });\n}\n\nexport default CafeContainer;"]},"metadata":{},"sourceType":"module"}