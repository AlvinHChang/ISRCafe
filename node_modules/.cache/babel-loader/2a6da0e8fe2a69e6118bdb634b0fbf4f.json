{"ast":null,"code":"import _classCallCheck from \"/Users/alvinchang/ISRCafe/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/alvinchang/ISRCafe/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/alvinchang/ISRCafe/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/alvinchang/ISRCafe/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/alvinchang/ISRCafe/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/alvinchang/ISRCafe/src/CafeContainer/CafeContainer.js\";\nimport React, { Fragment } from 'react';\nimport config from '../config';\nimport './CafeContainer.css';\n\nvar CafeContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CafeContainer, _React$Component);\n\n  function CafeContainer(props) {\n    var _this;\n\n    _classCallCheck(this, CafeContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CafeContainer).call(this, props));\n    _this.refreshInterval = 10;\n\n    _this.initClient = function () {\n      // 2. Initialize the JavaScript client library.\n      window.gapi.client.init({\n        apiKey: config.apiKey,\n        // Your API key will be automatically added to the Discovery Document URLs.\n        discoveryDocs: config.discoveryDocs\n      }).then(function () {\n        // 3. Initialize and make the API request.\n        load(_this.onLoad);\n      });\n    };\n\n    _this.onLoad = function (data, error) {\n      if (data) {\n        var cafes = data.cafes;\n\n        _this.setState({\n          cafes: cafes\n        });\n      } else {\n        _this.setState({\n          error: error\n        });\n      }\n    };\n\n    _this.tick = function () {\n      var refreshTime = _this.state.refreshTime - 1;\n\n      if (refreshTime <= 0) {\n        refreshTime = _this.refreshInterval;\n        load(_this.onLoad);\n      }\n\n      _this.setState({\n        refreshTime: refreshTime\n      });\n    };\n\n    _this.state = {\n      cafes: [],\n      error: null,\n      refreshTime: _this.refreshInterval\n    };\n    _this.intervalHandle = setInterval(_this.tick, 1000);\n    return _this;\n  }\n\n  _createClass(CafeContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // 1. Load the JavaScript client library.\n      window.gapi.load(\"client\", this.initClient);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          cafes = _this$state.cafes,\n          error = _this$state.error,\n          refreshTime = _this$state.refreshTime;\n\n      if (error) {\n        console.log(error);\n      }\n\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, \"Will refresh in \", refreshTime, \" seconds\", React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, cafes.map(function (cafe) {\n        var ready = \"READY\" + cafe.drink + \" for \" + cafe.name;\n        var notReady = \"PENDING\" + cafe.drink + \" for \" + cafe.name;\n        return React.createElement(\"li\", {\n          key: cafe.time,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, cafe.isReady ? ready : notReady);\n      })));\n    }\n  }]);\n\n  return CafeContainer;\n}(React.Component);\n\nexport function load(callback) {\n  window.gapi.client.load(\"sheets\", \"v4\", function () {\n    window.gapi.client.sheets.spreadsheets.values.get({\n      spreadsheetId: config.spreadsheetId,\n      range: \"Sheet4!A3:E\"\n    }).then(function (response) {\n      console.log(response);\n      var data = response.result.values;\n      console.log(data);\n      var cafes = data.map(function (cafe) {\n        return {\n          time: cafe[0],\n          name: cafe[1],\n          drink: cafe[2],\n          isReady: cafe[3] === 'TRUE',\n          hasReceived: cafe[4] === 'TRUE'\n        };\n      }) || [];\n      callback({\n        cafes: cafes\n      });\n    }, function (response) {\n      callback(false, response.result.error);\n    });\n  });\n}\nexport default CafeContainer;","map":{"version":3,"sources":["/Users/alvinchang/ISRCafe/src/CafeContainer/CafeContainer.js"],"names":["React","Fragment","config","CafeContainer","props","refreshInterval","initClient","window","gapi","client","init","apiKey","discoveryDocs","then","load","onLoad","data","error","cafes","setState","tick","refreshTime","state","intervalHandle","setInterval","console","log","map","cafe","ready","drink","name","notReady","time","isReady","Component","callback","sheets","spreadsheets","values","get","spreadsheetId","range","response","result","hasReceived"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAO,qBAAP;;IAEMC,a;;;;;AAEF,yBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,uFAAMA,KAAN;AADc,UADlBC,eACkB,GADA,EACA;;AAAA,UAalBC,UAbkB,GAaL,YAAM;AACf;AACAC,MAAAA,MAAM,CAACC,IAAP,CAAYC,MAAZ,CACKC,IADL,CACU;AACFC,QAAAA,MAAM,EAAET,MAAM,CAACS,MADb;AAEF;AACAC,QAAAA,aAAa,EAAEV,MAAM,CAACU;AAHpB,OADV,EAMKC,IANL,CAMU,YAAM;AACR;AACAC,QAAAA,IAAI,CAAC,MAAKC,MAAN,CAAJ;AACH,OATL;AAUH,KAzBiB;;AAAA,UA0BlBA,MA1BkB,GA0BT,UAACC,IAAD,EAAOC,KAAP,EAAiB;AACtB,UAAID,IAAJ,EAAU;AACN,YAAME,KAAK,GAAGF,IAAI,CAACE,KAAnB;;AACA,cAAKC,QAAL,CAAc;AAAED,UAAAA,KAAK,EAALA;AAAF,SAAd;AACH,OAHD,MAGO;AACH,cAAKC,QAAL,CAAc;AAAEF,UAAAA,KAAK,EAALA;AAAF,SAAd;AACH;AACJ,KAjCiB;;AAAA,UAmClBG,IAnCkB,GAmCX,YAAM;AACT,UAAIC,WAAW,GAAG,MAAKC,KAAL,CAAWD,WAAX,GAAyB,CAA3C;;AACA,UAAIA,WAAW,IAAI,CAAnB,EAAsB;AAClBA,QAAAA,WAAW,GAAG,MAAKhB,eAAnB;AACAS,QAAAA,IAAI,CAAC,MAAKC,MAAN,CAAJ;AACH;;AACD,YAAKI,QAAL,CAAc;AAACE,QAAAA,WAAW,EAAXA;AAAD,OAAd;AAEH,KA3CiB;;AAEd,UAAKC,KAAL,GAAa;AACTJ,MAAAA,KAAK,EAAE,EADE;AAETD,MAAAA,KAAK,EAAE,IAFE;AAGTI,MAAAA,WAAW,EAAE,MAAKhB;AAHT,KAAb;AAKA,UAAKkB,cAAL,GAAsBC,WAAW,CAAC,MAAKJ,IAAN,EAAY,IAAZ,CAAjC;AAPc;AAQjB;;;;wCACmB;AAChB;AACAb,MAAAA,MAAM,CAACC,IAAP,CAAYM,IAAZ,CAAiB,QAAjB,EAA2B,KAAKR,UAAhC;AACH;;;6BAgCQ;AAAA,wBAC+B,KAAKgB,KADpC;AAAA,UACEJ,KADF,eACEA,KADF;AAAA,UACSD,KADT,eACSA,KADT;AAAA,UACgBI,WADhB,eACgBA,WADhB;;AAEL,UAAIJ,KAAJ,EAAW;AACPQ,QAAAA,OAAO,CAACC,GAAR,CAAYT,KAAZ;AACH;;AACD,aACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BACqBI,WADrB,cAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKH,KAAK,CAACS,GAAN,CAAU,UAACC,IAAD,EAAU;AACb,YAAMC,KAAK,GAAG,UAAUD,IAAI,CAACE,KAAf,GAAuB,OAAvB,GAAiCF,IAAI,CAACG,IAApD;AACA,YAAMC,QAAQ,GAAG,YAAYJ,IAAI,CAACE,KAAjB,GAAyB,OAAzB,GAAmCF,IAAI,CAACG,IAAzD;AACA,eACI;AAAI,UAAA,GAAG,EAAEH,IAAI,CAACK,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKL,IAAI,CAACM,OAAL,GAAcL,KAAd,GAAqBG,QAD1B,CADJ;AAIH,OAPJ,CADL,CAFJ,CADJ;AAgBH;;;;EAnEuBhC,KAAK,CAACmC,S;;AAuElC,OAAO,SAASrB,IAAT,CAAcsB,QAAd,EAAwB;AAC7B7B,EAAAA,MAAM,CAACC,IAAP,CAAYC,MAAZ,CAAmBK,IAAnB,CAAwB,QAAxB,EAAkC,IAAlC,EAAwC,YAAM;AAC5CP,IAAAA,MAAM,CAACC,IAAP,CAAYC,MAAZ,CAAmB4B,MAAnB,CAA0BC,YAA1B,CAAuCC,MAAvC,CACGC,GADH,CACO;AACDC,MAAAA,aAAa,EAAEvC,MAAM,CAACuC,aADrB;AAEDC,MAAAA,KAAK,EAAE;AAFN,KADP,EAKG7B,IALH,CAMI,UAAA8B,QAAQ,EAAI;AACRlB,MAAAA,OAAO,CAACC,GAAR,CAAYiB,QAAZ;AACF,UAAM3B,IAAI,GAAG2B,QAAQ,CAACC,MAAT,CAAgBL,MAA7B;AACAd,MAAAA,OAAO,CAACC,GAAR,CAAYV,IAAZ;AACA,UAAME,KAAK,GAAGF,IAAI,CAACW,GAAL,CAAS,UAAAC,IAAI;AAAA,eAAK;AAC5BK,UAAAA,IAAI,EAAEL,IAAI,CAAC,CAAD,CADkB;AAE5BG,UAAAA,IAAI,EAAEH,IAAI,CAAC,CAAD,CAFkB;AAG5BE,UAAAA,KAAK,EAAEF,IAAI,CAAC,CAAD,CAHiB;AAI5BM,UAAAA,OAAO,EAAGN,IAAI,CAAC,CAAD,CAAJ,KAAY,MAJM;AAK5BiB,UAAAA,WAAW,EAAGjB,IAAI,CAAC,CAAD,CAAJ,KAAY;AALE,SAAL;AAAA,OAAb,KAOP,EAPP;AAQAQ,MAAAA,QAAQ,CAAC;AACPlB,QAAAA,KAAK,EAALA;AADO,OAAD,CAAR;AAGD,KArBL,EAsBI,UAAAyB,QAAQ,EAAI;AACVP,MAAAA,QAAQ,CAAC,KAAD,EAAQO,QAAQ,CAACC,MAAT,CAAgB3B,KAAxB,CAAR;AACD,KAxBL;AA0BD,GA3BD;AA4BD;AAED,eAAed,aAAf","sourcesContent":["import React, {Fragment} from 'react';\nimport config from '../config';\nimport './CafeContainer.css';\n\nclass CafeContainer extends React.Component{\n    refreshInterval = 10;\n    constructor(props){\n        super(props);\n        this.state = {\n            cafes: [],\n            error: null,\n            refreshTime: this.refreshInterval\n        }\n        this.intervalHandle = setInterval(this.tick, 1000);\n    }\n    componentDidMount() {\n        // 1. Load the JavaScript client library.\n        window.gapi.load(\"client\", this.initClient);\n    }\n    initClient = () => {\n        // 2. Initialize the JavaScript client library.\n        window.gapi.client\n            .init({\n                apiKey: config.apiKey,\n                // Your API key will be automatically added to the Discovery Document URLs.\n                discoveryDocs: config.discoveryDocs\n            })\n            .then(() => {\n                // 3. Initialize and make the API request.\n                load(this.onLoad);\n            });\n    };\n    onLoad = (data, error) => {\n        if (data) {\n            const cafes = data.cafes;\n            this.setState({ cafes });\n        } else {\n            this.setState({ error });\n        }\n    };\n\n    tick = () => {\n        let refreshTime = this.state.refreshTime - 1;\n        if (refreshTime <= 0) {\n            refreshTime = this.refreshInterval;\n            load(this.onLoad);\n        }\n        this.setState({refreshTime})\n\n    }\n    render() {\n        const {cafes, error, refreshTime} = this.state;\n        if (error) {\n            console.log(error);\n        }\n        return (\n            <Fragment>\n                Will refresh in {refreshTime} seconds\n                <ul>\n                    {cafes.map((cafe) => {\n                            const ready = \"READY\" + cafe.drink + \" for \" + cafe.name;\n                            const notReady = \"PENDING\" + cafe.drink + \" for \" + cafe.name;\n                            return(\n                                <li key={cafe.time}>\n                                    {cafe.isReady? ready: notReady}\n                                </li>)\n                        }\n                    )}\n                </ul>\n            </Fragment>\n        );\n    }\n}\n\n\nexport function load(callback) {\n  window.gapi.client.load(\"sheets\", \"v4\", () => {\n    window.gapi.client.sheets.spreadsheets.values\n      .get({\n          spreadsheetId: config.spreadsheetId,\n          range: \"Sheet4!A3:E\",\n      })\n      .then(\n        response => {\n            console.log(response);\n          const data = response.result.values;\n          console.log(data);\n          const cafes = data.map(cafe => ({\n              time: cafe[0],\n              name: cafe[1],\n              drink: cafe[2],\n              isReady: (cafe[3] === 'TRUE'),\n              hasReceived: (cafe[4] === 'TRUE'),\n\n          })) || [];\n          callback({\n            cafes\n          });\n        },\n        response => {\n          callback(false, response.result.error);\n        }\n      );\n  });\n}\n\nexport default CafeContainer;"]},"metadata":{},"sourceType":"module"}